<!-- Copy and paste everything below this line into your Elementor HTML widget -->

<!-- Charter Bus Quote Widget CSS -->
<style>
/* quote-widget.css */
.charter-quote-widget {
  max-width: 600px;
  margin: 0 auto;
  font-family: inherit;
  color: #333;
}
.charter-quote-widget h2 {
  font-size: 1.8rem;
  margin-bottom: 1rem;
  text-align: center;
}
.charter-quote-widget form {
  background: #fff;
  padding: 1.5rem;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.05);
}
.charter-quote-widget label {
  display: block;
  margin-bottom: 0.25rem;
  font-weight: 600;
}
.charter-quote-widget input,
.charter-quote-widget select,
.charter-quote-widget button {
  width: 100%;
  padding: 0.5rem;
  margin-bottom: 1rem;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: 1rem;
}
.charter-quote-widget button {
  background: #0066cc;
  color: #fff;
  border: none;
  cursor: pointer;
  transition: background 0.2s;
}
.charter-quote-widget button:hover {
  background: #005bb5;
}
.charter-quote-widget .results {
  margin-top: 1.5rem;
  padding: 1rem;
  border-radius: 6px;
  background: #f9f9f9;
  font-size: 1.1rem;
}
/* Additional styles */
.charter-quote-widget .form-group {
  margin-bottom: 1rem;
}
.charter-quote-widget .trip-type-options {
  display: flex;
  gap: 0.5rem;
  margin-bottom: 1rem;
}
.charter-quote-widget .trip-type-options button {
  flex: 1;
}
.charter-quote-widget .trip-type-options button.active {
  background: #005bb5;
}
.charter-quote-widget .error-message {
  color: #d32f2f;
  font-size: 0.8rem;
  margin-top: 0.25rem;
}
</style>

<!-- The Charter Bus Quote Widget -->
<div id="charter-quote-widget" class="charter-quote-widget">
  <h2>Charter Bus Quote</h2>
  
  <form id="quote-form">
    <!-- Trip Type -->
    <div class="form-group">
      <label>Trip Type</label>
      <div class="trip-type-options">
        <button type="button" class="active" data-trip-type="oneWay" id="one-way-btn">One Way</button>
        <button type="button" data-trip-type="roundTrip" id="round-trip-btn">Round Trip</button>
      </div>
    </div>
    
    <!-- Passenger Count -->
    <div class="form-group">
      <label for="numPassengers">Number of Passengers</label>
      <input type="number" id="numPassengers" min="1" max="100" value="1" required>
      <div class="error-message" id="numPassengers-error"></div>
    </div>
    
    <!-- Departure Date -->
    <div class="form-group">
      <label for="departureDate">Departure Date</label>
      <input type="date" id="departureDate" required>
      <div class="error-message" id="departureDate-error"></div>
    </div>
    
    <!-- Departure Time -->
    <div class="form-group">
      <label for="departureTime">Departure Time</label>
      <input type="time" id="departureTime" required>
      <div class="error-message" id="departureTime-error"></div>
    </div>
    
    <!-- Return Date (hidden by default) -->
    <div class="form-group" id="returnDateGroup" style="display: none;">
      <label for="returnDate">Return Date</label>
      <input type="date" id="returnDate" required>
      <div class="error-message" id="returnDate-error"></div>
    </div>
    
    <!-- Pickup Location -->
    <div class="form-group">
      <label for="pickup-location">Pickup Location</label>
      <input type="text" id="pickup-location" name="pickupLocation" placeholder="Enter pickup address" required>
      <div class="error-message" id="pickup-location-error"></div>
    </div>
    
    <!-- Dropoff Location -->
    <div class="form-group">
      <label for="dropoff-location">Dropoff Location</label>
      <input type="text" id="dropoff-location" name="dropoffLocation" placeholder="Enter destination address" required>
      <div class="error-message" id="dropoff-location-error"></div>
    </div>
    
    <!-- Bus Type (hidden, always Standard) -->
    <input type="hidden" id="busType" value="standard">
    
    <!-- Submit Button -->
    <button type="button" id="getQuote">Get Your Quote</button>
  </form>
  
  <!-- Results section (initially hidden) -->
  <div class="results" id="quoteResults" style="display: none;">
    <h3>Your Quote Summary</h3>
    <div id="quoteResultsContent"></div>
    <button type="button" id="newQuote">Get Another Quote</button>
  </div>
</div>

<!-- Initialize Google Maps with autocomplete -->
<script>
function initAutocomplete() {
  console.log("Initializing Google Places Autocomplete");
  
  // Initialize Places Autocomplete for pickup location
  const pickupInput = document.getElementById('pickup-location');
  if (pickupInput && window.google && window.google.maps && window.google.maps.places) {
    new google.maps.places.Autocomplete(pickupInput, { 
      types: ['address'] 
    });
    console.log("Pickup autocomplete initialized");
  } else {
    console.error("Failed to initialize pickup autocomplete");
  }
  
  // Initialize Places Autocomplete for dropoff location
  const dropoffInput = document.getElementById('dropoff-location');
  if (dropoffInput && window.google && window.google.maps && window.google.maps.places) {
    new google.maps.places.Autocomplete(dropoffInput, { 
      types: ['address'] 
    });
    console.log("Dropoff autocomplete initialized");
  } else {
    console.error("Failed to initialize dropoff autocomplete");
  }
}

// Basic form functionality
document.addEventListener('DOMContentLoaded', function() {
  // Trip type buttons
  const oneWayBtn = document.getElementById('one-way-btn');
  const roundTripBtn = document.getElementById('round-trip-btn');
  const returnDateGroup = document.getElementById('returnDateGroup');
  
  if (oneWayBtn && roundTripBtn) {
    oneWayBtn.addEventListener('click', function() {
      oneWayBtn.classList.add('active');
      roundTripBtn.classList.remove('active');
      if (returnDateGroup) returnDateGroup.style.display = 'none';
    });
    
    roundTripBtn.addEventListener('click', function() {
      roundTripBtn.classList.add('active');
      oneWayBtn.classList.remove('active');
      if (returnDateGroup) returnDateGroup.style.display = 'block';
    });
  }
  
  // Set minimum date for departure date
  const departureDateInput = document.getElementById('departureDate');
  const returnDateInput = document.getElementById('returnDate');
  if (departureDateInput) {
    const today = new Date().toISOString().split('T')[0];
    departureDateInput.min = today;
    
    if (returnDateInput && departureDateInput) {
      departureDateInput.addEventListener('change', function() {
        returnDateInput.min = departureDateInput.value;
      });
    }
  }
  
  // Get quote button
  const getQuoteBtn = document.getElementById('getQuote');
  if (getQuoteBtn) {
    getQuoteBtn.addEventListener('click', function() {
      // Here you would validate and submit the form
      // For this example we'll just show a simple message
      const quoteResults = document.getElementById('quoteResults');
      const quoteForm = document.getElementById('quote-form');
      const resultContent = document.getElementById('quoteResultsContent');
      
      if (quoteResults && quoteForm && resultContent) {
        // Simple validation
        if (validateForm()) {
          // Hide form, show results
          quoteForm.style.display = 'none';
          quoteResults.style.display = 'block';
          
          // Example content
          resultContent.innerHTML = `
            <p><strong>Trip Type:</strong> ${document.getElementById('round-trip-btn').classList.contains('active') ? 'Round Trip' : 'One Way'}</p>
            <p><strong>Passengers:</strong> ${document.getElementById('numPassengers').value}</p>
            <p><strong>Departure:</strong> ${document.getElementById('departureDate').value} at ${document.getElementById('departureTime').value}</p>
            <p><strong>Pickup:</strong> ${document.getElementById('pickup-location').value}</p>
            <p><strong>Dropoff:</strong> ${document.getElementById('dropoff-location').value}</p>
            <p><strong>Bus Type:</strong> Standard Charter Bus</p>
            <hr>
            <p><strong>Estimated Price:</strong> $1,250</p>
          `;
        }
      }
    });
  }
  
  // New quote button
  const newQuoteBtn = document.getElementById('newQuote');
  if (newQuoteBtn) {
    newQuoteBtn.addEventListener('click', function() {
      const quoteResults = document.getElementById('quoteResults');
      const quoteForm = document.getElementById('quote-form');
      
      if (quoteResults && quoteForm) {
        // Hide results, show form
        quoteResults.style.display = 'none';
        quoteForm.style.display = 'block';
      }
    });
  }
});

// Simple form validation
function validateForm() {
  let isValid = true;
  
  // Clear previous errors
  const errorMessages = document.querySelectorAll('.error-message');
  errorMessages.forEach(el => el.innerText = '');
  
  // Validate passengers
  const numPassengers = document.getElementById('numPassengers');
  if (numPassengers && (!numPassengers.value || parseInt(numPassengers.value) < 1)) {
    document.getElementById('numPassengers-error').innerText = 'Please enter a valid number of passengers';
    isValid = false;
  }
  
  // Validate departure date
  const departureDate = document.getElementById('departureDate');
  if (departureDate && !departureDate.value) {
    document.getElementById('departureDate-error').innerText = 'Please select a departure date';
    isValid = false;
  }
  
  // Validate departure time
  const departureTime = document.getElementById('departureTime');
  if (departureTime && !departureTime.value) {
    document.getElementById('departureTime-error').innerText = 'Please select a departure time';
    isValid = false;
  }
  
  // Validate return date for round trips
  const roundTripActive = document.getElementById('round-trip-btn').classList.contains('active');
  const returnDate = document.getElementById('returnDate');
  if (roundTripActive && returnDate && !returnDate.value) {
    document.getElementById('returnDate-error').innerText = 'Please select a return date';
    isValid = false;
  }
  
  // Validate pickup location
  const pickupLocation = document.getElementById('pickup-location');
  if (pickupLocation && !pickupLocation.value.trim()) {
    document.getElementById('pickup-location-error').innerText = 'Please enter a pickup location';
    isValid = false;
  }
  
  // Validate dropoff location
  const dropoffLocation = document.getElementById('dropoff-location');
  if (dropoffLocation && !dropoffLocation.value.trim()) {
    document.getElementById('dropoff-location-error').innerText = 'Please enter a dropoff location';
    isValid = false;
  }
  
  return isValid;
}
</script>

<!-- Load Google Maps API directly for immediate initialization -->
<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_API_KEY&libraries=places&callback=initAutocomplete" async defer></script>

<!-- End of Charter Bus Quote Widget -->