<!-- CHARTER BUS QUOTE WIDGET FOR ELEMENTOR -->
<!-- INSTRUCTIONS: Copy this entire code block into an HTML element in Elementor -->

<!-- CSS Styles -->
<style>
/* Base styles for the charter bus quote widget */
.charter-quote-widget {
  max-width: 600px;
  margin: 0 auto;
  font-family: inherit;
  color: #333;
}
.charter-quote-widget h2 {
  font-size: 1.8rem;
  margin-bottom: 1rem;
  text-align: center;
}
.charter-quote-widget form {
  background: #fff;
  padding: 1.5rem;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.05);
}
.charter-quote-widget label {
  display: block;
  margin-bottom: 0.25rem;
  font-weight: 600;
}
.charter-quote-widget input,
.charter-quote-widget select,
.charter-quote-widget button {
  width: 100%;
  padding: 0.5rem;
  margin-bottom: 1rem;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: 1rem;
}
.charter-quote-widget button {
  background: #0066cc;
  color: #fff;
  border: none;
  cursor: pointer;
  transition: background 0.2s;
}
.charter-quote-widget button:hover {
  background: #005bb5;
}
.charter-quote-widget .results {
  margin-top: 1.5rem;
  padding: 1rem;
  border-radius: 6px;
  background: #f9f9f9;
  font-size: 1.1rem;
}

/* Additional styles */
.charter-quote-widget .form-step {
  display: none;
}
.charter-quote-widget .form-step.active {
  display: block;
}
.charter-quote-widget .progress-bar {
  display: flex;
  justify-content: space-between;
  margin-bottom: 1.5rem;
  position: relative;
}
.charter-quote-widget .progress-bar:before {
  content: '';
  position: absolute;
  top: 17px;
  left: 0;
  right: 0;
  height: 1px;
  background: #e0e0e0;
  z-index: 1;
}
.charter-quote-widget .step {
  background: #f9f9f9;
  width: 35px;
  height: 35px;
  line-height: 35px;
  text-align: center;
  border-radius: 50%;
  border: 1px solid #e0e0e0;
  color: #999;
  font-weight: 500;
  position: relative;
  z-index: 2;
}
.charter-quote-widget .step.active {
  background-color: #0066cc;
  border-color: #0066cc;
  color: white;
}
.charter-quote-widget .amenities-options {
  display: flex;
  flex-wrap: wrap;
  gap: 15px;
  margin-bottom: 20px;
  padding: 15px;
  border: 2px solid #ffde00;
  border-radius: 4px;
}
.charter-quote-widget .amenity-option {
  display: flex;
  align-items: center;
  margin-right: 15px;
}
.charter-quote-widget .amenity-option input {
  width: auto;
  margin-right: 5px;
  margin-bottom: 0;
}
.charter-quote-widget .form-actions {
  display: flex;
  justify-content: space-between;
  margin-top: 20px;
}
.charter-quote-widget .btn-secondary {
  background: #f1f1f1;
  color: #333;
  margin-right: 10px;
}
.charter-quote-widget .btn-secondary:hover {
  background: #e0e0e0;
}
</style>

<!-- Widget HTML -->
<div id="charter-quote-widget" class="charter-quote-widget">
  <h2>Charter Bus Quote</h2>
  
  <form id="quote-form">
    <!-- Progress Steps -->
    <div class="progress-bar">
      <div class="step active">1</div>
      <div class="step">2</div>
      <div class="step">3</div>
    </div>
    
    <!-- Step 1: Trip Details -->
    <div id="step-1" class="form-step active">
      <div class="form-group">
        <label for="trip-type">Trip Type</label>
        <select id="trip-type" required>
          <option value="">Select Trip Type</option>
          <option value="one-way">One Way</option>
          <option value="round-trip">Round Trip</option>
        </select>
      </div>
      
      <div class="form-group">
        <label for="pickup-location">Pickup Location</label>
        <input type="text" id="pickup-location" placeholder="Enter pickup address" required>
      </div>
      
      <div class="form-group">
        <label for="dropoff-location">Dropoff Location</label>
        <input type="text" id="dropoff-location" placeholder="Enter dropoff address" required>
      </div>
      
      <div class="form-group">
        <label for="departure-date">Departure Date</label>
        <input type="date" id="departure-date" required>
      </div>
      
      <div id="return-date-container" class="form-group" style="display: none;">
        <label for="return-date">Return Date</label>
        <input type="date" id="return-date">
      </div>
      
      <div class="form-group">
        <label for="passenger-count">Number of Passengers</label>
        <input type="number" id="passenger-count" min="1" required>
      </div>
      
      <button type="button" id="next-button">Next</button>
    </div>
    
    <!-- Step 2: Amenities (Bus Type is hidden/preset) -->
    <div id="step-2" class="form-step">
      <h3>Additional Amenities</h3>
      
      <div class="amenities-options">
        <div class="amenity-option">
          <input type="checkbox" id="wifi" name="amenities" value="WiFi">
          <label for="wifi">WiFi</label>
        </div>
        
        <div class="amenity-option">
          <input type="checkbox" id="lavatory" name="amenities" value="Lavatory">
          <label for="lavatory">Lavatory</label>
        </div>
        
        <div class="amenity-option">
          <input type="checkbox" id="entertainment" name="amenities" value="Entertainment">
          <label for="entertainment">Entertainment</label>
        </div>
        
        <div class="amenity-option">
          <input type="checkbox" id="power" name="amenities" value="Power Outlets">
          <label for="power">Power Outlets</label>
        </div>
      </div>
      
      <div class="form-actions">
        <button type="button" id="back-button" class="btn-secondary">Back</button>
        <button type="button" id="get-quote-button">Get Quote</button>
      </div>
    </div>
    
    <!-- Step 3: Quote Results -->
    <div id="step-3" class="form-step">
      <div class="results">
        <h3>Your Charter Bus Quote</h3>
        
        <p><strong>Trip Type:</strong> <span id="quote-trip-type"></span></p>
        <p><strong>Pickup:</strong> <span id="quote-pickup"></span></p>
        <p><strong>Dropoff:</strong> <span id="quote-dropoff"></span></p>
        <p><strong>Passengers:</strong> <span id="quote-passengers"></span></p>
        <p><strong>Amenities:</strong> <span id="quote-amenities"></span></p>
        <p><strong>Total Price:</strong> <span id="quote-total"></span></p>
      </div>
      
      <button type="button" id="book-now-button">Book Now</button>
    </div>
  </form>
</div>

<!-- Google Maps & Widget JavaScript -->
<script>
  // STEP 1: REPLACE WITH YOUR GOOGLE MAPS API KEY
  const GOOGLE_MAPS_API_KEY = 'YOUR_GOOGLE_MAPS_API_KEY'; 

  // Load Google Maps API
  function loadGoogleMaps() {
    const script = document.createElement('script');
    script.src = `https://maps.googleapis.com/maps/api/js?key=${GOOGLE_MAPS_API_KEY}&libraries=places&callback=initAutocomplete`;
    script.async = true;
    script.defer = true;
    document.head.appendChild(script);
  }
  
  // Initialize autocomplete after API loads
  window.initAutocomplete = function() {
    // Initialize autocomplete for pickup location
    new google.maps.places.Autocomplete(
      document.getElementById('pickup-location'),
      {types: ['address']}
    );
    
    // Initialize autocomplete for dropoff location
    new google.maps.places.Autocomplete(
      document.getElementById('dropoff-location'),
      {types: ['address']}
    );
  };
  
  // Initialize widget
  document.addEventListener('DOMContentLoaded', function() {
    // Load Google Maps API
    loadGoogleMaps();
    
    // Setup event listeners
    document.getElementById('trip-type').addEventListener('change', function() {
      const returnContainer = document.getElementById('return-date-container');
      if (this.value === 'round-trip') {
        returnContainer.style.display = 'block';
      } else {
        returnContainer.style.display = 'none';
      }
    });
    
    document.getElementById('next-button').addEventListener('click', function() {
      if (validateStep1()) {
        showStep(2);
      }
    });
    
    document.getElementById('back-button').addEventListener('click', function() {
      showStep(1);
    });
    
    document.getElementById('get-quote-button').addEventListener('click', function() {
      if (true) { // No validation needed for step 2
        showStep(3);
        calculateQuote();
      }
    });
    
    document.getElementById('book-now-button').addEventListener('click', function() {
      alert('Thank you! Your booking request has been submitted.');
    });
    
    // Set default dates
    const today = new Date();
    const tomorrow = new Date(today);
    tomorrow.setDate(today.getDate() + 1);
    
    const nextWeek = new Date(today);
    nextWeek.setDate(today.getDate() + 7);
    
    const formatDate = date => {
      return date.toISOString().split('T')[0];
    };
    
    document.getElementById('departure-date').value = formatDate(tomorrow);
    document.getElementById('return-date').value = formatDate(nextWeek);
  });
  
  function showStep(stepNumber) {
    // Hide all steps
    document.querySelectorAll('.form-step').forEach(step => {
      step.classList.remove('active');
    });
    
    // Show current step
    document.getElementById(`step-${stepNumber}`).classList.add('active');
    
    // Update progress indicator
    document.querySelectorAll('.progress-bar .step').forEach((step, index) => {
      if (index + 1 === stepNumber) {
        step.classList.add('active');
      } else {
        step.classList.remove('active');
      }
    });
  }
  
  function validateStep1() {
    // Simple validation - check for required fields
    const requiredFields = ['trip-type', 'pickup-location', 'dropoff-location', 
                          'departure-date', 'passenger-count'];
    let valid = true;
    
    requiredFields.forEach(fieldId => {
      const field = document.getElementById(fieldId);
      if (!field.value) {
        valid = false;
        field.style.borderColor = 'red';
      } else {
        field.style.borderColor = '#ccc';
      }
    });
    
    // Check return date if round trip
    if (document.getElementById('trip-type').value === 'round-trip') {
      const returnDate = document.getElementById('return-date');
      if (!returnDate.value) {
        valid = false;
        returnDate.style.borderColor = 'red';
      } else {
        returnDate.style.borderColor = '#ccc';
      }
    }
    
    return valid;
  }
  
  function calculateQuote() {
    // Get form values
    const tripType = document.getElementById('trip-type').value;
    const pickupLocation = document.getElementById('pickup-location').value;
    const dropoffLocation = document.getElementById('dropoff-location').value;
    const passengerCount = document.getElementById('passenger-count').value;
    
    // Get selected amenities
    const amenities = [];
    document.querySelectorAll('input[name="amenities"]:checked').forEach(checkbox => {
      amenities.push(checkbox.value);
    });
    
    // Calculate a simple quote (in real implementation, you'd call your API)
    const basePrice = 800; // Standard charter bus price
    const distanceFactor = 1.5; // Mock distance multiplier
    
    let total = basePrice * distanceFactor;
    
    // Add 80% for round trip (20% discount)
    if (tripType === 'round-trip') {
      total *= 1.8;
    }
    
    // Add $50 per amenity
    total += amenities.length * 50;
    
    // Add 10% service fee
    const serviceFee = total * 0.1;
    const finalTotal = total + serviceFee;
    
    // Display the quote
    document.getElementById('quote-total').textContent = '$' + finalTotal.toFixed(2);
    document.getElementById('quote-pickup').textContent = pickupLocation;
    document.getElementById('quote-dropoff').textContent = dropoffLocation;
    document.getElementById('quote-passengers').textContent = passengerCount;
    document.getElementById('quote-trip-type').textContent = tripType === 'one-way' ? 'One Way' : 'Round Trip';
    document.getElementById('quote-amenities').textContent = amenities.length ? amenities.join(', ') : 'None';
  }
</script>